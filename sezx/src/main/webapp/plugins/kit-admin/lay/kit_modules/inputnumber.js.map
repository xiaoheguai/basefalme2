{"version":3,"sources":["inputnumber.js"],"names":["layui","define","exports","$","jquery","laytpl","min","precision","defaultType","onClicked","UP","undefined","InputNumber","that","set","options","this","render","prototype","config","_that","rendered","each","_private","randomCode","join","left","offsetWidth","tpl","html","id","max","type","attr","parent","append","val","parseInt","parseFloat","_in","find","on","c","elem","value","v","isFunction","DOWN","Math","random","toString","substr","validate","_validate","obj","isDouble","isInteger","length","test","inputNumber"],"mappings":"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","file":"inputnumber.js","sourcesContent":["layui.define(['jquery', 'laytpl'], function(exports) {\n  var $ = layui.jquery,\n    laytpl = layui.laytpl;\n\n  var tpl = [\n    '<div class=\"kit-inputnumber\" kit-in-for=\"{{d.id}}\" style=\"left:{{d.left}}px;\">',\n    '  <div class=\"kit-inputnumber-up\"><i class=\"layui-icon\">&#xe619;</i></div>',\n    '  <div class=\"kit-inputnumber-down\"><i class=\"layui-icon\">&#xe61a;</i></div>',\n    '</div>'\n  ];\n\n  var InputNumber = function() {\n    this.config = {\n      max: 1000000,\n      min: 0,\n      precision: 1,\n      defaultType: 'integer',\n      onClicked: undefined\n    };\n  }\n  var UP = '.kit-inputnumber-up',\n    DOWN = '.kit-inputnumber-down',\n    IN = '.kit-inputnumber';\n  InputNumber.prototype.set = function(options) {\n    var that = this;\n    $.extend(true, that.config, options);\n    return that;\n  };\n  InputNumber.prototype.render = function() {\n    var that = this,\n      config = that.config;\n    $('input[kit-target=\"inputnumber\"]').each(function() {\n      var _that = $(this);\n      var rendered = _that.attr('data-rendered');\n      if (!rendered) {\n        // 随机id\n        var id = _private.randomCode();\n        laytpl(tpl.join('')).render({\n          id: id,\n          left: _that[0].offsetWidth - 28\n        }, function(html) {\n          var min = _that[0].min || config.min; // 读取最小值\n          var max = _that[0].max || config.max; // 读取最大值\n          var precision = _that.attr('kit-in-precision') || config.precision; //向量\n          var type = _that.attr('kit-in-type') || config.defaultType;         //类型\n\n          _that[0].id = id;\n          _that.parent().append(html);\n          _that.attr('data-rendered', 'true');\n\n          var val = _that.val();\n          if (_private.validate(val) == 0) {\n            _that.val(0);\n          }\n          switch (config.defaultType) {\n            case 'integer':\n              if (parseInt(val) > parseInt(max)) {\n                _that.val(max);\n              }\n              if (parseInt(val) < parseInt(min)) {\n                _that.val(min);\n              }\n              break;\n            case 'double':\n              if (parseFloat(val) > parseFloat(max)) {\n                _that.val(max);\n              }\n              if (parseFloat(val) < parseFloat(min)) {\n                _that.val(min);\n              }\n              break;\n          }\n          // 监听事件\n          var _in = $('div[kit-in-for=\"' + id + '\"]');\n          _in.find(UP).off('click').on('click', function() {\n            var v = _private.validate(_that.val());\n            if (config.defaultType === 'integer') {\n              var c = parseInt(v);\n              c += parseInt(precision);\n              max = parseInt(max);\n              if (c >= max)\n                c = max;\n              _that.val(c);\n            }\n            _private.isFunction(config.onClicked) && config.onClicked({\n              elem: _that,\n              value: v\n            });\n          });\n          _in.find(DOWN).off('click').on('click', function() {\n            var v = _private.validate(_that.val());\n            if (config.defaultType === 'integer') {\n              var c = parseInt(v);\n              c -= parseInt(precision);\n              min = parseInt(min);\n              if (c <= min)\n                c = min;\n              _that.val(c);\n            }\n            _private.isFunction(config.onClicked) && config.onClicked({\n              elem: _that,\n              value: v\n            });\n          });\n        });\n      }\n    });\n  };\n  var _private = {\n    randomCode: function() {\n      return Math.random().toString(36).substr(2);\n    },\n    validate: function(val) {\n      if (!(val !== '' && _validate.isInteger(val) || _validate.isDouble(val))) {\n        return 0;\n      }\n      return val;\n    },\n    isFunction: function(obj) {\n      return typeof obj === 'function';\n    }\n  };\n  var _validate = {\n    isInteger: function(val) {\n      return val.length != 0 && /^[-+]?\\d*$/.test(val);\n    },\n    isDouble: function(val) {\n      return val.length != 0 && /^[-\\+]?\\d+(\\.\\d+)?$/.test(val);\n    }\n  }\n\n  var inputNumber = new InputNumber();\n\n  exports('inputnumber', inputNumber);\n});"]}