/** kitadmin-v2.1.0 MIT License By http://kit.zhengjinfan.cn Author Van Zheng */
;"use strict";layui.define(["jquery","utils","axios"],function(e){var o=layui.jquery,l=layui.utils,s=layui.lodash,n=layui.axios,a=l.localStorage,i=function(){this.config={elem:void 0,onClicked:void 0,dynamicRender:!1,data:[],remote:{url:void 0,method:"get"},cached:!1,cacheKey:"KITADMINMENU",isJump:!0,onlyOne:!0},this.version="1.0.0"},u=".kit-menu",c=".kit-menu-item";i.prototype.set=function(e){return o.extend(!0,this.config,e),this},i.prototype.render=function(){var i=this,n=i.config;if(n.dynamicRender)if(0<n.data.length)a.setItem(n.cacheKey,t),r.renderHTML(n.elem,n.data,function(){i.bind()});else{var e=!1;if(n.cached){var t=a.getItem(n.cacheKey);null!=t&&(e=!0,r.renderHTML(n.elem,t,function(){i.bind()}))}e||r.loadData(n.remote,function(e){a.setItem(n.cacheKey,e),r.renderHTML(n.elem,e,function(){i.bind()})})}else i.bind();return i},i.prototype.bind=function(){var r=this.config;return o(u).find(c).each(function(){var i=o(this),n=i.children("a");"kit-menu"===i.parent()[0].className&&i.attr("lay-one",!0);var t=0<i.find("ul.kit-menu-child").length;t&&n.addClass("child");var a=i.attr("lay-id");""!==a&&void 0!==a||(a=l.randomCode(),i.attr("lay-id",a)),n.off("click").on("click",function(e){if(layui.stope(e),t?(i.hasClass("layui-show")?i.removeClass("layui-show"):i.addClass("layui-show"),r.onlyOne&&i.attr("lay-one")&&i.siblings().removeClass("layui-show")):(o(u).find(c).removeClass("layui-this"),i.addClass("layui-this")),l.isFunction(r.onClicked)&&r.onClicked({elem:i,hasChild:t,data:{href:n.attr("href"),layid:a}}),!r.isJump)return!1})}),this},i.prototype.removeCache=function(e){var i=this.config;e=e||i.cacheKey,l.localStorage.removeItem(e)};var r={renderHTML:function(e,i,n){var t=['<ul class="kit-menu">'];if(this.recursion(t,i,0),0<t.length){t.push("</ul>");var a=o(e);if(0===a.length)return void l.error("Menu config error:请配置elem参数.");a.html(t.join("")),l.isFunction(n)&&n()}},recursion:function(a,e,n){var r=this,t=[];s.forEach(e,function(e,i){e.pid===n&&t.push(e)}),0<t.length&&s.forEach(t,function(e){var i=e.open?"layui-show":"";a.push('<li class="kit-menu-item '+i+'">');var n=s.isEmpty(e.path)?"javascript:;":e.path;e.blank?a.push('<a href="'+n+'" target="_blank">'):a.push('<a href="'+n+'">'),a.push('<i class="layui-icon">'+e.icon+"</i> "),a.push("<span>"+e.title+"</span>"),a.push("</a>");var t=e.children;null!=t&&0<t.length&&(a.push('<ul class="kit-menu-child kit-menu-child layui-anim layui-anim-upbit">'),r.recursion(a,t,e.id),a.push("</ul>")),a.push("</li>")})},loadData:function(e,i){n(e).then(function(e){if(500===e.status)throw new Error(e.statusText);return e.data}).then(function(e){i(e)}).catch(function(e){l.error(e)})}};e("menu",new i)});
//# sourceMappingURL=menu.js.map
