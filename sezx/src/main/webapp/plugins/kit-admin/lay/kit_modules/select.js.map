{"version":3,"sources":["select.js"],"names":["layui","define","exports","layer","$","jquery","_","lodash","laytpl","utils","_body","tpl","_selector","console","targetId","_that","Select","_classCallCheck","this","log","_createClass","key","value","_input","undefined","filter","randomCode","id","hasDrop","style","len","top","join","html","_select","after","drop","width","document","find","on","e","stope","focus","opts","forEach","push","children","val","length","opt","show","render","clientHeight","append","select","hide","off","index","text","innerText"],"mappings":";8XAAAA,MAAMC,OAAO,CAAC,QAAS,SAAU,SAAU,SAAU,SAAUC,GACjDF,MAAMG,MAAlB,IACEC,EAAIJ,MAAMK,OACVC,EAAIN,MAAMO,OACVC,EAASR,MAAMQ,OACfC,EAAQT,MAAMS,MACdC,GANJN,EAAc,QAMA,CAOV,wIALF,0BACA,sCACA,UAOE,0BALF,sCAgBA,UARE,0BApBoE,sCAiDpE,UAAc,0BAzBd,sCA0BE,UAGD,UArDmEO,EAAA,CAAA,mDAAA,oCAuDlE,qCAvBF,qCA2BEC,gCACE,oCACA,gCACA,iDACA,iBACAC,gBALyB,gCAnB7B,kCA0BIA,gBACAL,cACEM,aAD0B,WAG1BC,UAoDRb,EAAQ,SAHO,IAvHuD,WAiDpE,SAAAc,IAAcC,gBAAAC,KAAAF,GAyBRH,KAAAA,OAAQM,GA1EsD,OAAAC,aAAAJ,EAAA,CAAA,CAAAK,IAAA,SAAAC,MAAA,SA8E5DC,GAEEvB,OADQwB,IAAAC,EACRzB,2BACA,uCAAAyB,EAAA,KAEArB,KAAE,WACH,IAAAW,EALDX,EAAAc,MAMAJ,EAAaV,EAAEsB,aACfR,KAAAS,GAAMC,EACNV,KAAAW,MAAKD,QAAS,OACZpB,QAAAA,IAAAA,GALcsB,IAMZhB,EAAAA,KAAAA,SACAiB,QAAAA,IAAAA,GAF+BvB,EAAAG,EAG9BqB,KAAA,KAACC,OAAS,CACXC,SAAAA,GACD,SAAAD,GACFlB,EAPDoB,MAOOF,GACLG,IAAAA,EAAAhC,EAAA,sBAAAU,EAAA,KACDuB,EAAAH,EAAAG,QACCC,EAAaJ,EAAS,GAAtBI,aACAlC,QAAEe,IAAAe,GACF9B,EAAEmC,KA/FHvC,qBA+FawC,GAAA,QAAZ,SAAAC,GACDzC,MAHD0C,MAAAD,GAID,IA1BDlB,EAAAnB,EAAAc,MAAAqB,KAAA,SARFhB,EAAAoB,QAoCApB,EAAAiB,GAAA,uBAAA,SAAAC,GACIG,MAAAA,MAAJH,GACEI,IACKC,EADQC,EAAAA,MACHC,MAAAC,OACR3B,EAAAA,MAAO4B,MADC,EACG5B,KADH,IAAVc,EAAAhC,EAAA,mCAAAU,EAAA,KADF,EAAAsB,EAAAa,OAzGgEb,EAAAe,OAgH9DtC,EAAQM,EAARa,KAAA,KAAAoB,OAAA,CADFtC,SAAAA,EAAAuB,MAAAA,EApDFN,IAAAsB,EAAA,GAwDQlC,SAAAA,GACTe,EAAAK,KAjHShC,sBAiHT+C,OAAArB,KAnBO7B,EAAEkC,UAAUE,GAAG,QAAS,WAsB5Be,EAAS,mCAAfzC,EAAA,KAAA0C,OApBYpD,EAAEc,MAAMuC,IAAI,eAKlB,IAAIb,EAAO,GACXtC,EAAEuC,QAAQ3B,KAAK6B,SAAU,SAACG,EAAKQ,GAC7Bd,EAAKE,KAAK,CACRxB,MAAO4B,EAAI5B,MACXqC,KAAMT,EAAIU,cAGdxD,EAAEc,MAAMsB,GAAG,SAAU,WACnB3B,QAAQM,IAAI,UAGhBN,QAAQM,IAAI,YAnHsDH,EAAA","file":"select.js","sourcesContent":["layui.define(['layer', 'lodash', 'laytpl', 'utils'], function (exports) {\n  var layer = layui.layer,\n    $ = layui.jquery,\n    _ = layui.lodash,\n    laytpl = layui.laytpl,\n    utils = layui.utils,\n    _body = $('body');\n\n  const SELECT = '.kit-select';\n  const RENDER = '.kit-select-render';\n  const INPUT = '.kit-select-input';\n\n  const tpl_drop = [\n    '<ul class=\"kit-select-dropdown layui-anim layui-anim-upbit\" style=\"width:{{d.width}}px;top:{{d.top}}px;\" kit-target=\"{{d.targetId}}\">',\n    '  <li class=\"kit-item\">',\n    '    <a href=\"javascript:;\">#xxx</a>',\n    '  </li>',\n    '  <li class=\"kit-item\">',\n    '    <a href=\"javascript:;\">#xxx</a>',\n    '  </li>',\n    '  <li class=\"kit-item\">',\n    '    <a href=\"javascript:;\">#xxx</a>',\n    '  </li>',\n    '  <li class=\"kit-item\">',\n    '    <a href=\"javascript:;\">#xxx</a>',\n    '  </li>',\n    '</ul>',\n  ];\n  const tpl = [\n    '<div class=\"kit-select\" kit-id=\"{{d.targetId}}\">',\n    '  <div class=\"kit-select-render\">',\n    '    <div class=\"kit-select-input\">',\n    '      <ul class=\"kit-select-tags\">',\n    '        <li class=\"kit-item\">',\n    '          <a href=\"javascript:;\">',\n    '            <span>#1xx</span>',\n    '            <i class=\"layui-icon\">&#x1006;</i>',\n    '          </a>',\n    '        </li>',\n    '        <li class=\"kit-item\">',\n    '          <input type=\"text\" />',\n    '        </li>',\n    '      </ul>',\n    '    </div>',\n    '  </div>',\n    '</div>',\n  ];\n\n  class Select {\n    constructor() {\n      this.config = {\n\n      };\n    }\n    render(filter) {\n      const _selector = filter === undefined ?\n        $('select.kit-select-target') :\n        $('select.kit-select-target[lay-filter=' + filter + ']');\n\n      _selector.each(function () {\n        const _that = $(this);\n        const targetId = utils.randomCode();\n        this.id = targetId;\n        this.style.display = 'none';\n        console.log(_that);\n        const { multiple } = this;\n        console.log(multiple);\n        laytpl(tpl.join('')).render({\n          targetId\n        }, (html) => {\n          _that.after(html);\n          const _select = $('.kit-select[kit-id=' + targetId + ']')\n          const width = _select.width();\n          const { clientHeight } = _select[0];\n          console.log(_select);\n          _select.find(INPUT).on('click', function (e) {\n            layui.stope(e);\n            const _input = $(this).find('input');\n            _input.focus();\n            _input.on('input propertychange', function (e) {\n              layui.stope(e);\n              const _this = $(this);\n              const len = _this.val().length;\n              $(this).width(len * 8);\n            })\n            const drop = $('.kit-select-dropdown[kit-target=' + targetId + ']');\n            const hasDrop = drop.length > 0;\n            if (!hasDrop) {\n              laytpl(tpl_drop.join('')).render({\n                targetId, width,\n                top: clientHeight + 2\n              }, (html) => {\n                _select.find(RENDER).append(html);\n              });\n            } else {\n              drop.show();\n            }\n            $(document).on('click', function () {\n              $('.kit-select-dropdown[kit-target=' + targetId + ']').hide();\n              $(this).off('click');\n            });\n          });\n        });\n        // options \n        let opts = [];\n        _.forEach(this.children, (opt, index) => {\n          opts.push({\n            value: opt.value,\n            text: opt.innerText\n          });\n        });\n        $(this).on('change', function () {\n          console.log('cc');\n        });\n      });\n      console.log('cccc');\n    };\n  }\n\n  const select = new Select();\n\n  //输出utils接口\n  exports('select', select);\n});"]}