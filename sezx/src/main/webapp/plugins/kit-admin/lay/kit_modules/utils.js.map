{"version":3,"sources":["utils.js"],"names":["layui","define","exports","_","lodash","axios","isObject","msg","oneOf","utils","value","validList","error","console","item","index","localStorage","getItem","flag","key","JSON","parse","data","_typeof","setItem","d","removeItem","find","arr","callback","findKey","tplLoader","that","this","then","res","get","regList","match","ids","forEach","push","filters","length","undefined","matchResult","result","substring","reg","RegExp","regStr","replace","randomCode","catch","errorMsg","request","status","statusText","log","onerror","interval","clearInterval","url","title","setUrlState","Math","random","toString","isFunction","obj","isString"],"mappings":";oOAAAA,MAAMC,OAAO,CAAC,SAAU,SAAU,SAASC,GACzC,IAAIC,EAAIH,MAAMI,OACZC,EAAQL,MAAMK,MAmGdC,EAAAA,QAlGU,CAHdN,MAAMC,SAAQM,GACRJ,QAAIH,MAAMI,IAEdI,MAAIC,SAAQC,EAAAC,GACVC,IAAAA,GAAO,EAMH,OALFC,EAAAA,QAAQD,EAAR,SAAAE,EAAAC,GAFQD,IAAAJ,IAIVF,GAAO,KAGCM,GAGLE,aAJD,CAKAC,QAAOC,SAAPC,GAXQ,OAAAC,KAAAC,MAAAL,aAAAC,QAAAE,KAcVH,QAAAA,SAAcG,EAAAG,GACZL,IAAAA,EAAkBE,iBAAT,IAAAG,EAAA,YAAAC,QAAAD,KAAc,gBAAAA,EACrBF,KAAOA,UAAAE,GAAWN,EAFRA,aAAAQ,QAAAL,EAAAM,IAKVC,WAAS,SAAOJ,GAEhBN,aAAaQ,WAAbL,IAEFO,MAAAA,WACEV,aAAaU,UAejBC,KAAM,SAASC,EAAKC,GAClB,OAAOD,EAAIzB,EAAE2B,QAAQF,EAAKC,KAA1BE,UAAOH,SAAME,EAAQF,EAAKC,GAxClB,IAAAG,EAAAC,KA0CVX,EAAA,GAEEjB,EAAI2B,IAAAA,GACJE,KAAIZ,SAAJa,GACAb,EAAAa,EAAAb,KACAjB,IAAM+B,EACHF,GAEKG,EAAAA,EAAJC,MAAA,eACA,OAAAC,GAAApC,EAAAqC,QAAAD,EAAA,SAAAzB,GAAAuB,EAAAI,KAAA3B,KAEAyB,IAAAA,EAAgBpC,EAAEqC,MAAQD,uBAAsB,OAAAF,GAAAlC,EAAAqC,QAAAE,EAAA,SAAA5B,GAAAuB,EAAAI,KAAA3B,KAChD,EAAAuB,EAAAM,QAEAD,EAAAA,QAAYL,EAAUG,SAAQE,GAA0BL,IAAQI,EAAR3B,EAAAwB,MAAA,WAAxD,QAAAM,IAAAC,GAAA,MAAAA,GAAA,EAAAA,EAAAF,OAAA,CAOM,IAAIG,EAASD,EAAY,GALnBF,EAASG,EAAGC,UAAA,EAAAD,EAAAH,OAAA,GACtBK,EAAA,IAAAC,OAAAC,EAAA,KACEV,EAAQH,EAAVc,QAAmBH,EAASlC,EAAMsC,mBAK9BC,MAAA,SAAUzC,GACVU,IAAAA,EAAOA,EAAK6B,QACbG,EAAA,iBAAAC,EAAAC,OAAA,UAAAD,EAAAE,WACF5C,QARD6C,IAAAJ,GASD,mBAAAK,GAAAA,EAAAL,KAID,IAAAM,EAAIN,YAAW,WACHA,KAAZzC,IACAgD,cAAAD,GA5BJ/B,EAAAP,KA+BA,KAEIuC,YAAAA,SAAcD,EAAdE,GACAjC,QAAAA,UAAA,GAAAkC,EAAAD,IAGLV,WApFS,WAqFVY,MAAAA,IAAaC,KAAAC,SAAAC,SAASJ,IAAOD,OAAK,IAEjCM,WAvFS,SAAAC,GAwFV,MAAA,mBAAAA,GAEEC,SAAO,SAAML,GA1FL,MAAA,iBAAAI,GA6FR/D,SAAO,SAAA+D,GA7FC,MAAA,iBAAA,IAAAA,EAAA,YAAA9C,QAAA8C","file":"utils.js","sourcesContent":["layui.define(['lodash', 'axios'], function(exports) {\n  var _ = layui.lodash,\n    axios = layui.axios;\n  var utils = {\n    error: function(msg) {\n      console.error(msg);\n    },\n    oneOf: function(value, validList) {\n      var flag = false;\n      _.forEach(validList, function(item, index) {\n        if (item === value) {\n          flag = true;\n        }\n      })\n      return flag;\n    },\n    // 本地存储相关 \n    localStorage: {\n      getItem: function(key) {\n        return JSON.parse(localStorage.getItem(key));\n      },\n      setItem: function(key, data) {\n        var d = (typeof data === 'object' || typeof data === 'array') ?\n          JSON.stringify(data) : data;\n        localStorage.setItem(key, d);\n      },\n      removeItem: function(key) {\n        localStorage.removeItem(key);\n      },\n      clear: function() {\n        localStorage.clear();\n      }\n    },\n    /**\n     * 在一个数组里面查询一个对象\n     * var r = 1;\n     * var arr = [{name:'a',id:1},{name:'b',id:2}]\n     * var result = utils.find(arr,function(item){\n     *   return r === item.id;\n     * });\n     *  // result : {name:'a',id:1}\n     */\n    find: function(arr, callback) {\n      return arr[_.findKey(arr, callback)];\n    },\n    // 读取模板\n    tplLoader: function(url, callback, onerror) {\n      var that = this;\n      var data = '';\n      // TODO 跨域未实现\n      axios.get(url)\n        .then(function(res) {\n          data = res.data;\n          var regList = [];\n          // 重置id 防止冲突\n          var ids = data.match(/id=\\\"\\w*\\\"/g);\n          ids !== null && _.forEach(ids, function(item) { regList.push(item); });\n          // 重置lay-filter 防止冲突\n          var filters = data.match(/lay-filter=\\\"\\w*\\\"/g);\n          filters !== null && _.forEach(filters, function(item) { regList.push(item); });\n\n          if (regList.length > 0) {\n            // 循环替换\n            _.forEach(regList, function(item) {\n              var matchResult = item.match(/\\\"\\w*\\\"/);\n              if (matchResult !== undefined && matchResult != null && matchResult.length > 0) {\n                var result = matchResult[0];\n                var regStr = result.substring(1, result.length - 1);\n                var reg = new RegExp(regStr, 'g');\n                data = data.replace(reg, that.randomCode());\n              }\n            });\n          }\n        })\n        .catch(function(error) {\n          var request = error.request;\n          var errorMsg = '读取模板出现异常，异常代码：' + request.status + '、 异常信息：' + request.statusText;\n          console.log(errorMsg);\n          typeof onerror === 'function' && onerror(errorMsg);\n        });\n\n      var interval = setInterval(function() {\n        if (data !== '') {\n          clearInterval(interval);\n          callback(data);\n        }\n      }, 50);\n    },\n    setUrlState: function(title, url) {\n      history.pushState({}, title, url);\n    },\n    // 获取随机字符\n    randomCode: function() {\n      return 'r' + Math.random().toString(36).substr(2);\n    },\n    isFunction: function(obj) {\n      return typeof obj === 'function';\n    },\n    isString: function(obj) {\n      return typeof obj === 'string';\n    },\n    isObject: function(obj) {\n      return typeof obj === 'object';\n    }\n  };\n  //输出utils接口\n  exports('utils', utils);\n});"]}